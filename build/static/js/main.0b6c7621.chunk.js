(this["webpackJsonpredux-anecdotes"]=this["webpackJsonpredux-anecdotes"]||[]).push([[0],{58:function(t,e,n){"use strict";n.r(e);var r=n(0),c=n(8),a=n.n(c),o=n(3),u=n(2),i=n.n(u),s=n(5),l=n(26),d=n(6),f=n(9),O=n.n(f),j="/anecdotes",v={getAll:function(){var t=Object(s.a)(i.a.mark((function t(){var e;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("TULEEKO GET AALIIN"),t.next=3,O.a.get(j);case 3:return e=t.sent,console.log("Responssi",e.data),t.abrupt("return",e.data);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),createNewAnecdote:function(){var t=Object(s.a)(i.a.mark((function t(e){var n,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={content:e,votes:0},t.next=3,O.a.post(j,n);case 3:return r=t.sent,t.abrupt("return",r.data);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),addNewVote:function(){var t=Object(s.a)(i.a.mark((function t(e,n){var r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O.a.put("".concat(j,"/").concat(n),e);case 2:return r=t.sent,t.abrupt("return",r.data);case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},p=[].map((function(t){return{content:t,id:(1e5*Math.random()).toFixed(0),votes:0}})),b=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"VOTE":var n=e.data.id,r=t.find((function(t){return t.id===n})),c=Object(d.a)(Object(d.a)({},r),{},{votes:r.votes+1});return t.map((function(t){return t.id!==n?t:c})).sort((function(t,e){return t.votes<=e.votes?1:-1}));case"NEW_ANECDOTE":return console.log("TULEEKO UUSI ANECDOTE",e.data),[].concat(Object(l.a)(t),[e.data]);case"INIT_ANECDOTES":return e.data.sort((function(t,e){return t.votes<=e.votes?1:-1}));default:return t}},h={value:"Mukavaa p\xe4iv\xe4\xe4"},E=null,T=function(t,e){return console.log("createNewNotification",t),function(){var n=Object(s.a)(i.a.mark((function n(r){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("TIMEOUT ID:n ARVO",E),n.next=3,r({type:"NEW_NOTIFICATION",data:{notification:t}});case 3:null!==E&&(console.log("K\xc4VIK\xd6 IFFISS\xc4"),clearTimeout(E),E=null),E=setTimeout((function(){r({type:"REMOVE_NOTE"})}),1e3*e),console.log("TIMEOUT ID:n ARVO",E);case 6:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()},N=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"NEW_NOTIFICATION":return console.log("TULEEKO NOTIFICATIONIIN case NEW_ANECDOTE_NOTE",e.data),Object(d.a)(Object(d.a)({},t),{},{value:e.data.notification});case"REMOVE_NOTE":return Object(d.a)(Object(d.a)({},t),{},{value:null});default:return t}},x=n(1),I=function(t){var e=t.anecdote,n=t.handleClick;return Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{children:e.content}),Object(x.jsxs)("div",{children:["has ",e.votes,Object(x.jsx)("button",{onClick:n,children:"vote"})]})]})},w=function(){var t=Object(o.c)(),e=function(e){t(function(t,e){return console.log("TULIKO VOTEEN"),function(){var n=Object(s.a)(i.a.mark((function n(r){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,v.addNewVote({content:t.content,votes:t.votes+1},t.id);case 2:r({type:"VOTE",data:{id:e}});case 3:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()}(e,e.id)),t(T("YOU VOTED: '".concat(e.content,"'"),10))},n=Object(o.d)((function(t){return t.filter.value.toLocaleLowerCase()}));return Object(o.d)((function(t){return""===n?t.anecdotes:t.anecdotes.filter((function(t){return t.content.toLocaleLowerCase().includes(n)}))})).map((function(t){return Object(x.jsx)(I,{anecdote:t,handleClick:function(){return e(t)}},t.id)}))},A=Object(o.b)((function(t){return{notification:t.notification}}))((function(t){return null!==t.notification.value?Object(x.jsx)("div",{style:{border:"solid",padding:10,borderWidth:1},children:t.notification.value}):null===t.notification.value?null:void 0})),g={createAnecdote:function(t){return console.log("TULIKO CREATW ANECDOTEEN",t),function(){var e=Object(s.a)(i.a.mark((function e(n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.createNewAnecdote(t);case 2:r=e.sent,n({type:"NEW_ANECDOTE",data:r});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},createNewNotification:T},m=Object(o.b)(null,g)((function(t){var e=function(){var e=Object(s.a)(i.a.mark((function e(n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),r=n.target.newAnecdote.value,n.target.newAnecdote.value="",t.createAnecdote(r),console.log("UUSI ANEKDOOTTI",r),t.createNewNotification("YOU CREATED: '".concat(r,"'"),10);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsx)("div",{children:Object(x.jsxs)("form",{onSubmit:e,children:[Object(x.jsx)("div",{children:Object(x.jsx)("input",{id:"newAnecdoteId",name:"newAnecdote"})}),Object(x.jsx)("button",{id:"submit-buttonId",type:"submit",children:"create"})]})})})),y={value:""},C=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"FILTER_ANECDOTES_ALIGN_WITH_INPUT":return Object(d.a)(Object(d.a)({},t),{},{value:e.data.content});default:return t}},_={filterAnecdotes:function(t){return{type:"FILTER_ANECDOTES_ALIGN_WITH_INPUT",data:{content:t}}}},D=Object(o.b)(null,_)((function(t){return Object(x.jsxs)("div",{style:{marginBottom:10},children:["filter ",Object(x.jsx)("input",{onChange:function(e){e.preventDefault();var n=e.target.value;t.filterAnecdotes(n)}})]})})),k=function(){var t=Object(o.c)();return console.log("Tuleeko APP.js"),Object(r.useEffect)((function(){t(function(){var t=Object(s.a)(i.a.mark((function t(e){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.getAll();case 2:n=t.sent,e({type:"INIT_ANECDOTES",data:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}),[t]),Object(x.jsxs)("div",{children:[Object(x.jsx)(A,{}),Object(x.jsx)("h2",{children:"Filter anecdote"}),Object(x.jsx)(D,{}),Object(x.jsx)("br",{}),Object(x.jsx)("h2",{children:"Anecdotes"}),Object(x.jsx)(w,{}),Object(x.jsx)("h2",{children:"create new"}),Object(x.jsx)(m,{})]})},U=n(7),L=n(24),V=n(25),R=Object(U.combineReducers)({anecdotes:b,notification:N,filter:C}),S=Object(U.createStore)(R,Object(L.composeWithDevTools)(Object(U.applyMiddleware)(V.a)));a.a.render(Object(x.jsx)(o.a,{store:S,children:Object(x.jsx)(k,{})}),document.getElementById("root"))}},[[58,1,2]]]);
//# sourceMappingURL=main.0b6c7621.chunk.js.map